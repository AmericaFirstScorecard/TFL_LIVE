<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Live TFL win probability, MVP odds, standings, and bracket in one place." />
  <meta name="theme-color" content="#0b0f1a" />

  <title>TFL Live Win Probability + MVP Odds</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <link rel="icon" type="image/svg+xml" href="logos/TFLs.svg">
  <link rel="apple-touch-icon" href="logos/TFLs.svg">

  <meta property="og:type" content="website">
  <meta property="og:site_name" content="TFL Live Monitor">
  <meta property="og:title" content="Tate Football League Sports Network">
  <meta property="og:description" content="Live TFL win probability, MVP odds, standings, and bracket.">
  <meta property="og:image" content="https://www.tatefblive.com/logos/TateFBLiveEmbed.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:image:alt" content="Live stats, win probabilities, and more at TateFBLive.com">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:url" content="https://www.tatefblive.com/">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Tate Football League Sports Network">
  <meta name="twitter:description" content="Live TFL win probability, MVP odds, standings, and bracket.">
  <meta name="twitter:image" content="https://www.tatefblive.com/logos/TateFBLiveEmbed.png">
  <meta name="twitter:image:alt" content="Tate Football League live games, stats, and MVP race.">

  <link rel="stylesheet" href="styles.css" />

  <script defer src="https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script defer src="legacy.js"></script>
</head>

<body>
  <div class="page">
    <header class="hero">
      <div class="brand">TFL Live Monitor</div>
      <nav class="nav" aria-label="Primary">
        <a href="#win" class="nav__item nav__item--active" data-tab="win" aria-current="page">Win Prob</a>
        <a href="#mvp" class="nav__item" data-tab="mvp">MVP Odds</a>
        <a href="#standings" class="nav__item" data-tab="standings">Standings</a>
        <a href="#draft" class="nav__item" data-tab="draft">Draft</a>
        <a href="#news" class="nav__item" data-tab="news">News</a>
        <a href="#bracket" class="nav__item" data-tab="bracket">Tate Bowl Bracket</a>
        <a href="#schedule" class="nav__item" data-tab="schedule">Schedule</a>
        <a href="compare.html" class="nav__item">Team Compare</a>
        <a href="leaders.html" class="nav__item">State Leaders</a>
        <a href="records.html" class="nav__item">Records</a>
      </nav>
      <div class="meta">Auto-refreshing every 30 seconds</div>
    </header>

    <main>
      <section id="tab-win" class="tab tab--active" aria-label="Win Probability view">
        <div class="panel" id="winPanel">
          <div class="panel__header">
            <div class="badge" id="gameStatus">Loading‚Ä¶</div>
            <div class="pill-row" id="pillRow"></div>
            <div class="tag" id="pregameTag">Pregame: ‚Äî</div>
          </div>

          <div class="teams">
            <div class="teams__row">
              <div class="team team--away">
                <div class="team__crest">
                  <div class="team__possession team__possession--left" id="teamAPossession" aria-hidden="true">üèà</div>
                  <div class="team__logo" id="teamALogo"></div>
                </div>
                <div class="team__name" id="teamAName">Team A</div>
                <div class="team__record" id="teamARecord">&nbsp;</div>
              </div>

              <div class="score">
                <div class="score__line">
                  <div class="score__team">
                    <span class="score__delta" id="teamAScoreDelta"></span>
                    <span class="score__value" id="teamAScore">0</span>
                  </div>
                  <div class="score__center">
                    <span class="score__divider">‚Äî</span>
                  </div>
                  <div class="score__team">
                    <span class="score__delta" id="teamBScoreDelta"></span>
                    <span class="score__value" id="teamBScore">0</span>
                  </div>
                </div>
              </div>

              <div class="team team--home">
                <div class="team__crest">
                  <div class="team__possession team__possession--right" id="teamBPossession" aria-hidden="true">üèà</div>
                  <div class="team__logo" id="teamBLogo"></div>
                </div>
                <div class="team__name" id="teamBName">Team B</div>
                <div class="team__record" id="teamBRecord">&nbsp;</div>
              </div>
            </div>

            <div class="score__ticker" aria-live="polite">
              <div class="ticker ticker--clock">
                <div class="ticker__label">Game clock</div>
                <div class="ticker__value">
                  <span class="ticker__pill" id="tickerQuarter">Q-</span>
                  <span class="ticker__clock" id="tickerClock">--:--</span>
                </div>
              </div>

              <div class="ticker ticker--down">
                <div class="ticker__label">Down &amp; distance</div>
                <div class="ticker__value">
                  <span class="ticker__pill" id="tickerDown">‚Äî</span>
                  <span class="ticker__sub" id="tickerYtg">YTG ‚Äî</span>
                </div>
              </div>

              <div class="ticker ticker--poss">
                <div class="ticker__label">Possession</div>
                <div class="ticker__value">
                  <span class="ticker__ball" id="tickerBall" aria-hidden="true">üèà</span>
                  <span class="ticker__pill ticker__pill--outline" id="tickerPossession">‚Äî</span>
                </div>
              </div>
            </div>
          </div>

          <div class="chart-card">
            <div class="chart-card__header">
              <div>
                <div class="chart-card__title">Win probability</div>
                <div class="chart-card__subtitle" id="lastUpdate">Awaiting data‚Ä¶</div>
              </div>
            </div>
            <canvas id="winProbChart" height="220"></canvas>
          </div>

          <div class="insights" id="insights">
            <div class="insight">
              <div class="insight__label">Momentum</div>
              <div class="insight__value" id="momentumValue">‚Äî</div>
            </div>
            <div class="insight">
              <div class="insight__label">Big swing</div>
              <div class="insight__value" id="swingValue">‚Äî</div>
            </div>
            <div class="insight">
              <div class="insight__label">Clutch window</div>
              <div class="insight__value" id="clutchValue">‚Äî</div>
            </div>
            <div class="insight">
              <div class="insight__label">Baseline</div>
              <div class="insight__value" id="baselineValue">‚Äî</div>
            </div>
          </div>

          <div class="live-stats">
            <div class="live-stats__header">
              <div class="chart-card__title">Live stats</div>
              <div class="chart-card__subtitle">Latest team totals pulled from the feed</div>
            </div>
            <div class="live-stats__grid" id="liveStatsGrid"></div>
            <div class="state state--empty" id="liveStatsEmpty" hidden>Live stats will appear once provided.</div>
          </div>

          <div class="state state--loading" id="winLoading">Loading matchup feed‚Ä¶</div>
          <div class="state state--error" id="winError" hidden>Unable to load matchup feed. Retrying‚Ä¶</div>

          <div class="breakdown">
            <div class="breakdown__header">
              <div class="chart-card__title">Team breakdown</div>
              <div class="chart-card__subtitle">Key team stats (live)</div>
            </div>
            <div class="breakdown__grid" id="breakdownGrid"></div>
          </div>
        </div>
      </section>

      <section id="tab-mvp" class="tab" aria-label="MVP Odds view">
        <div class="panel">
          <div class="panel__header">
            <div>
              <div class="chart-card__title">MVP Odds</div>
              <div class="chart-card__subtitle">Passing leaders pulled live from the sheet</div>
            </div>
            <div class="badge badge--ghost" id="mvpStatus">Loading‚Ä¶</div>
          </div>

          <div class="table-container">
            <table class="table" id="mvpTable">
              <thead>
                <tr>
                  <th data-sort="player">Player</th>
                  <th data-sort="team">Team</th>
                  <th data-sort="winPct">Win%</th>
                  <th data-sort="mvpScore">MVP Score</th>
                  <th data-sort="passRating">Pass Rating</th>
                  <th data-sort="yards">Pass Yards</th>
                  <th data-sort="passTd">TD / INT</th>
                  <th>Stat Split</th>
                  <th>Details</th>
                </tr>
              </thead>
              <tbody id="mvpTableBody"></tbody>
            </table>
            <div class="state state--loading" id="mvpLoading">Loading MVP feed‚Ä¶</div>
            <div class="state state--error" id="mvpError" hidden>Unable to load MVP feed. Retrying‚Ä¶</div>
            <div class="state state--empty" id="mvpEmpty" hidden>No MVP odds available.</div>
          </div>

          <div class="lookup-panel">
            <div class="lookup-panel__header">
              <div class="chart-card__title">Player lookup</div>
              <div class="chart-card__subtitle">Find active and legacy players. Inactive profiles are flagged.</div>
            </div>
            <div class="lookup-panel__controls">
              <input type="search" id="playerLookupInput" placeholder="Search by name or nickname‚Ä¶" aria-label="Player lookup" />
              <button class="pill pill--ghost" id="playerLookupClear" type="button">Clear</button>
            </div>
            <div class="lookup-panel__hints" id="playerLookupHints"></div>
            <div class="lookup-panel__results" id="playerLookupResults">
              <div class="state state--muted">Start typing to find any player, even inactive ones.</div>
            </div>
          </div>
        </div>
      </section>

      <section id="tab-standings" class="tab" aria-label="Standings view">
        <div class="panel">
          <div class="panel__header">
            <div class="chart-card__title">Standings</div>
            <div class="badge badge--ghost" id="standingsStatus">Live table from MVP sheet</div>
          </div>
          <div class="table-container">
            <table class="table" id="standingsTable">
              <thead>
                <tr>
                  <th>Team</th>
                  <th>G</th>
                  <th>W</th>
                  <th>D</th>
                  <th>L</th>
                  <th>+/‚àí</th>
                  <th>P</th>
                  <th>Win%</th>
                </tr>
              </thead>
              <tbody id="standingsTableBody"></tbody>
            </table>
            <div class="state state--loading" id="standingsLoading">Loading standings‚Ä¶</div>
            <div class="state state--error" id="standingsError" hidden>Unable to load standings.</div>
          </div>
        </div>
      </section>

      <section id="tab-draft" class="tab" aria-label="Draft center view">
        <div class="panel">
          <div class="panel__header">
            <div>
              <div class="chart-card__title">Draft Center</div>
              <div class="chart-card__subtitle">Live picks from the ‚Äúdraft‚Äù sheet</div>
            </div>
            <div class="badge badge--ghost" id="draftStatus">Loading‚Ä¶</div>
          </div>

          <div class="draft-spotlight" id="draftSpotlight" aria-live="polite">
            <div class="state state--muted" id="draftEmpty">Draft pick spotlights will appear here instantly.</div>
          </div>
          <div class="state state--loading" id="draftLoading">Listening for draft picks‚Ä¶</div>
          <div class="state state--error" id="draftError" hidden>Unable to load draft feed.</div>

          <div class="draft-board">
            <div class="draft-board__header">
              <div>
                <div class="chart-card__title">Draft board</div>
                <div class="chart-card__subtitle">Pick position, trades, and landing spots</div>
              </div>
            </div>
            <div class="draft-board__grid" id="draftBoard"></div>
            <div class="state state--empty" id="draftBoardEmpty" hidden>No draft picks have been posted yet.</div>
          </div>
        </div>
      </section>

      <section id="tab-schedule" class="tab" aria-label="Schedule view">
        <div class="panel">
          <div class="panel__header">
            <div>
              <div class="chart-card__title">Schedule</div>
              <div class="chart-card__subtitle">Week-by-week matchups pulled live from the sheet</div>
            </div>
            <div class="badge badge--ghost" id="scheduleStatus">Loading‚Ä¶</div>
          </div>

          <div class="schedule" id="scheduleFeed"></div>

          <div class="state state--loading" id="scheduleLoading">Loading schedule‚Ä¶</div>
          <div class="state state--error" id="scheduleError" hidden>Unable to load schedule. Retrying‚Ä¶</div>
          <div class="state state--empty" id="scheduleEmpty" hidden>No schedule found.</div>
        </div>
      </section>

      <section id="tab-news" class="tab" aria-label="News view">
        <div class="panel">
          <div class="panel__header">
            <div class="chart-card__title">League News</div>
            <div class="badge badge--ghost" id="newsStatus">Freshest headlines from the sheet</div>
          </div>
          <div class="news-feed" id="newsFeed"></div>
          <div class="state state--loading" id="newsLoading">Loading news‚Ä¶</div>
          <div class="state state--error" id="newsError" hidden>Unable to load news.</div>
          <div class="state state--empty" id="newsEmpty" hidden>No headlines found.</div>
        </div>
      </section>

      <section id="tab-bracket" class="tab" aria-label="Tate Bowl Bracket view">
        <div class="panel">
          <div class="panel__header">
            <div>
              <div class="chart-card__title">Tate Bowl Bracket</div>
              <div class="chart-card__subtitle">Seeds update live from the standings sheet</div>
            </div>
            <div class="badge badge--ghost" id="bracketStatus">Loading‚Ä¶</div>
          </div>
          <div class="bracket" id="bracketDiagram"></div>
          <div class="state state--loading" id="bracketLoading">Building bracket‚Ä¶</div>
          <div class="state state--error" id="bracketError" hidden>Unable to build bracket.</div>
        </div>
      </section>
    </main>

    <div class="overlay" id="detailOverlay" hidden>
      <div class="overlay__backdrop"></div>
      <div class="overlay__content" role="dialog" aria-modal="true" aria-labelledby="detailTitle">
        <button class="overlay__close" id="detailClose" aria-label="Close details">√ó</button>
        <div class="detail">
          <div class="detail__header">
            <div>
              <div class="detail__title" id="detailTitle">Team details</div>
              <div class="detail__subtitle" id="detailSubtitle">Tap a team in standings to explore</div>
            </div>
            <div class="detail__badge" id="detailRecord">Record ‚Äî</div>
          </div>
          <div class="detail__body">
            <div class="detail__team" id="teamSummary"></div>
            <div class="detail__players" id="teamPlayers"></div>
            <div class="detail__player-detail" id="playerDetail"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="overlay" id="gameDetailOverlay" hidden>
      <div class="overlay__backdrop"></div>
      <div class="overlay__content" role="dialog" aria-modal="true" aria-labelledby="gameDetailTitle">
        <button class="overlay__close" id="gameDetailClose" aria-label="Close game details">√ó</button>
        <div class="game-detail">
          <div class="game-detail__header">
            <div>
              <div class="game-detail__title" id="gameDetailTitle">Game details</div>
              <div class="game-detail__subtitle" id="gameDetailSubtitle">Win probability history</div>
            </div>
            <div class="badge badge--ghost" id="gameDetailBadge">Final</div>
          </div>

          <div class="game-detail__meta-bar">
            <div class="game-detail__score" id="gameDetailScore">Team A ‚Äî Team B</div>
            <div class="game-detail__chart-meta" id="gameDetailChartMeta"></div>
          </div>

          <div class="game-detail__grid">
            <div class="game-detail__chart-card">
              <canvas id="gameDetailChart" height="200"></canvas>
            </div>
            <div class="game-detail__stats" id="gameDetailStats"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="overlay" id="playerOverlay" hidden>
      <div class="overlay__backdrop"></div>
      <div class="overlay__content" role="dialog" aria-modal="true" aria-labelledby="playerOverlayTitle">
        <button class="overlay__close" id="playerOverlayClose" aria-label="Close player details">√ó</button>
        <div id="playerOverlayContent"></div>
      </div>
    </div>
  </div>

  <script defer src="app.js"></script>
</body>
</html>
