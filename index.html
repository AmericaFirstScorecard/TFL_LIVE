
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TFL Live Win Probability + MVP Odds</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
</head>
<body>
  <div class="page">
    <header class="hero">
      <div class="brand">TFL Live Monitor</div>
      <nav class="nav" aria-label="Primary">
        <a href="#win" class="nav__item nav__item--active" data-tab="win">Win Prob</a>
        <a href="#mvp" class="nav__item" data-tab="mvp">MVP Odds</a>
      </nav>
      <div class="meta">Auto-refreshing every 30 seconds</div>
    </header>

    <main>
      <section id="tab-win" class="tab tab--active" aria-labelledby="Win Probability view">
        <div class="panel">
          <div class="panel__header">
            <div class="badge" id="gameStatus">Loading…</div>
            <div class="pill-row" id="pillRow"></div>
            <div class="tag" id="pregameTag">Pregame baseline: —</div>
          </div>

          <div class="teams">
            <div class="team team--away">
              <div class="team__logo" id="teamALogo"></div>
              <div class="team__name" id="teamAName">Team A</div>
              <div class="team__record" id="teamARecord">&nbsp;</div>
            </div>
            <div class="score">
              <div class="score__line">
                <span id="teamAScore">0</span>
                <span class="score__divider">—</span>
                <span id="teamBScore">0</span>
              </div>
              <div class="score__meta">
                <span id="possession">Possession —</span>
                <span id="quarter">Q-</span>
                <span id="clock">ML —</span>
              </div>
              <div class="score__meta">
                <span id="downDistance">Down & Distance —</span>
                <span id="ytg">YTG —</span>
              </div>
            </div>
            <div class="team team--home">
              <div class="team__logo" id="teamBLogo"></div>
              <div class="team__name" id="teamBName">Team B</div>
              <div class="team__record" id="teamBRecord">&nbsp;</div>
            </div>
          </div>

          <div class="chart-card">
            <div class="chart-card__header">
              <div>
                <div class="chart-card__title">Win probability</div>
                <div class="chart-card__subtitle" id="lastUpdate">Awaiting data…</div>
              </div>
              <div class="chip" id="teamListChip">Teams: —</div>
            </div>
            <canvas id="winProbChart" height="320"></canvas>
          </div>

          <div class="insights" id="insights">
            <div class="insight">
              <div class="insight__label">Momentum</div>
              <div class="insight__value" id="momentumValue">—</div>
            </div>
            <div class="insight">
              <div class="insight__label">Big swing</div>
              <div class="insight__value" id="swingValue">—</div>
            </div>
            <div class="insight">
              <div class="insight__label">Clutch window</div>
              <div class="insight__value" id="clutchValue">—</div>
            </div>
            <div class="insight">
              <div class="insight__label">Baseline</div>
              <div class="insight__value" id="baselineValue">—</div>
            </div>
          </div>

          <div class="state state--loading" id="winLoading">Loading matchup feed…</div>
          <div class="state state--error" id="winError" hidden>Unable to load matchup feed. Retrying…</div>
        </div>
      </section>

      <section id="tab-mvp" class="tab" aria-labelledby="MVP Odds view">
        <div class="panel">
          <div class="panel__header">
            <div>
              <div class="chart-card__title">MVP Odds</div>
              <div class="chart-card__subtitle">Live every 30s — with & without vig</div>
            </div>
            <div class="badge badge--ghost" id="mvpStatus">Loading…</div>
          </div>

          <div class="table-container">
            <table class="table" id="mvpTable">
              <thead>
                <tr>
                  <th data-sort="player">Player</th>
                  <th data-sort="team">Team</th>
                  <th data-sort="winPct">Win%</th>
                  <th data-sort="mvpScore">MVP Score</th>
                  <th data-sort="impliedWithVig">Implied Prob</th>
                  <th data-sort="decimalOdds">Decimal</th>
                  <th data-sort="americanOdds">American</th>
                  <th>Details</th>
                </tr>
              </thead>
              <tbody id="mvpTableBody"></tbody>
            </table>
            <div class="state state--loading" id="mvpLoading">Loading MVP feed…</div>
            <div class="state state--error" id="mvpError" hidden>Unable to load MVP feed. Retrying…</div>
            <div class="state state--empty" id="mvpEmpty" hidden>No MVP odds available.</div>
          </div>
        </div>
      </section>
    </main>
  </div>
  <script src="app.js"></script>
</body>
</html>
