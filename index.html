
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TFL Live Win Probability + MVP Odds</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="icon" href="data:,">
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>
<body>
  <div class="page">
    <header class="hero">
      <div class="brand">TFL Live Monitor</div>
      <nav class="nav" aria-label="Primary">
        <a href="#win" class="nav__item nav__item--active" data-tab="win">Win Prob</a>
        <a href="#mvp" class="nav__item" data-tab="mvp">MVP Odds</a>
        <a href="#standings" class="nav__item" data-tab="standings">Standings</a>
        <a href="#news" class="nav__item" data-tab="news">News</a>
        <a href="#bracket" class="nav__item" data-tab="bracket">Tate Bowl Bracket</a>
      </nav>
      <div class="meta">Auto-refreshing every 30 seconds</div>
    </header>

    <main>
      <section id="tab-win" class="tab tab--active" aria-labelledby="Win Probability view">
        <div class="panel" id="winPanel">
          <div class="panel__header">
            <div class="badge" id="gameStatus">Loading‚Ä¶</div>
            <div class="pill-row" id="pillRow"></div>
            <div class="tag" id="pregameTag">Pregame: ‚Äî</div>
          </div>

          <div class="teams">
            <div class="team team--away">
              <div class="team__crest">
                <div class="team__possession team__possession--left" id="teamAPossession" aria-hidden="true">üèà</div>
                <div class="team__logo" id="teamALogo"></div>
              </div>
              <div class="team__name" id="teamAName">Team A</div>
              <div class="team__record" id="teamARecord">&nbsp;</div>
            </div>
            <div class="score">
              <div class="score__line">
                <div class="score__team">
                  <span class="score__delta" id="teamAScoreDelta"></span>
                  <span class="score__value" id="teamAScore">0</span>
                </div>
                <div class="score__center">
                  <span class="score__winner" id="winnerArrow" aria-hidden="true"></span>
                  <span class="score__divider">‚Äî</span>
                </div>
                <div class="score__team">
                  <span class="score__delta" id="teamBScoreDelta"></span>
                  <span class="score__value" id="teamBScore">0</span>
                </div>
              </div>
              <div class="score__ticker" aria-live="polite">
                <div class="ticker ticker--clock">
                  <div class="ticker__label">Game clock</div>
                  <div class="ticker__value">
                    <span class="ticker__pill" id="tickerQuarter">Q-</span>
                    <span class="ticker__clock" id="tickerClock">--:--</span>
                  </div>
                </div>
                <div class="ticker ticker--down">
                  <div class="ticker__label">Down &amp; distance</div>
                  <div class="ticker__value">
                    <span class="ticker__pill" id="tickerDown">‚Äî</span>
                    <span class="ticker__sub" id="tickerYtg">YTG ‚Äî</span>
                  </div>
                </div>
                <div class="ticker ticker--poss">
                  <div class="ticker__label">Possession</div>
                  <div class="ticker__value">
                    <span class="ticker__ball" id="tickerBall" aria-hidden="true">üèà</span>
                    <span class="ticker__pill ticker__pill--outline" id="tickerPossession">‚Äî</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="team team--home">
              <div class="team__crest">
                <div class="team__possession team__possession--right" id="teamBPossession" aria-hidden="true">üèà</div>
                <div class="team__logo" id="teamBLogo"></div>
              </div>
              <div class="team__name" id="teamBName">Team B</div>
              <div class="team__record" id="teamBRecord">&nbsp;</div>
            </div>
          </div>

          <div class="chart-card">
            <div class="chart-card__header">
              <div>
                <div class="chart-card__title">Win probability</div>
                <div class="chart-card__subtitle" id="lastUpdate">Awaiting data‚Ä¶</div>
              </div>
            </div>
            <canvas id="winProbChart" height="220"></canvas>
          </div>

          <div class="insights" id="insights">
            <div class="insight">
              <div class="insight__label">Momentum</div>
              <div class="insight__value" id="momentumValue">‚Äî</div>
            </div>
            <div class="insight">
              <div class="insight__label">Big swing</div>
              <div class="insight__value" id="swingValue">‚Äî</div>
            </div>
            <div class="insight">
              <div class="insight__label">Clutch window</div>
              <div class="insight__value" id="clutchValue">‚Äî</div>
            </div>
            <div class="insight">
              <div class="insight__label">Baseline</div>
              <div class="insight__value" id="baselineValue">‚Äî</div>
            </div>
          </div>

          <div class="live-stats">
            <div class="live-stats__header">
              <div class="chart-card__title">Live stats</div>
              <div class="chart-card__subtitle">Latest team totals pulled from the feed</div>
            </div>
            <div class="live-stats__grid" id="liveStatsGrid"></div>
            <div class="state state--empty" id="liveStatsEmpty" hidden>Live stats will appear once provided.</div>
          </div>

          <div class="state state--loading" id="winLoading">Loading matchup feed‚Ä¶</div>
          <div class="state state--error" id="winError" hidden>Unable to load matchup feed. Retrying‚Ä¶</div>
          <div class="breakdown">
            <div class="breakdown__header">
              <div class="chart-card__title">Team breakdown</div>
              <div class="chart-card__subtitle">Key team stats (live)</div>
            </div>
            <div class="breakdown__grid" id="breakdownGrid"></div>
          </div>
        </div>
      </section>

      <section id="tab-mvp" class="tab" aria-labelledby="MVP Odds view">
        <div class="panel">
          <div class="panel__header">
            <div>
              <div class="chart-card__title">MVP Odds</div>
              <div class="chart-card__subtitle">Passing leaders pulled live from the sheet</div>
            </div>
            <div class="badge badge--ghost" id="mvpStatus">Loading‚Ä¶</div>
          </div>

          <div class="table-container">
            <table class="table" id="mvpTable">
              <thead>
                <tr>
                  <th data-sort="player">Player</th>
                  <th data-sort="team">Team</th>
                  <th data-sort="winPct">Win%</th>
                  <th data-sort="mvpScore">MVP Score</th>
                  <th data-sort="passRating">Pass Rating</th>
                  <th data-sort="yards">Yards</th>
                  <th data-sort="passTd">TD / INT</th>
                  <th>Details</th>
                </tr>
              </thead>
              <tbody id="mvpTableBody"></tbody>
            </table>
            <div class="state state--loading" id="mvpLoading">Loading MVP feed‚Ä¶</div>
            <div class="state state--error" id="mvpError" hidden>Unable to load MVP feed. Retrying‚Ä¶</div>
            <div class="state state--empty" id="mvpEmpty" hidden>No MVP odds available.</div>
          </div>
        </div>
      </section>

      <section id="tab-standings" class="tab" aria-labelledby="Standings view">
        <div class="panel">
          <div class="panel__header">
            <div class="chart-card__title">Standings</div>
            <div class="badge badge--ghost" id="standingsStatus">Live table from MVP sheet</div>
          </div>
          <div class="table-container">
            <table class="table" id="standingsTable">
              <thead>
                <tr>
                  <th>Team</th>
                  <th>G</th>
                  <th>W</th>
                  <th>D</th>
                  <th>L</th>
                  <th>+/‚àí</th>
                  <th>P</th>
                  <th>Win%</th>
                </tr>
              </thead>
              <tbody id="standingsTableBody"></tbody>
            </table>
            <div class="state state--loading" id="standingsLoading">Loading standings‚Ä¶</div>
            <div class="state state--error" id="standingsError" hidden>Unable to load standings.</div>
          </div>
        </div>
      </section>

      <section id="tab-news" class="tab" aria-labelledby="News view">
        <div class="panel">
          <div class="panel__header">
            <div class="chart-card__title">League News</div>
            <div class="badge badge--ghost" id="newsStatus">Freshest headlines from the sheet</div>
          </div>
          <div class="news-feed" id="newsFeed"></div>
          <div class="state state--loading" id="newsLoading">Loading news‚Ä¶</div>
          <div class="state state--error" id="newsError" hidden>Unable to load news.</div>
          <div class="state state--empty" id="newsEmpty" hidden>No headlines found.</div>
        </div>
      </section>

      <section id="tab-bracket" class="tab" aria-labelledby="Tate Bowl Bracket view">
        <div class="panel">
          <div class="panel__header">
            <div>
              <div class="chart-card__title">Tate Bowl Bracket</div>
              <div class="chart-card__subtitle">Seeds update live from the standings sheet</div>
            </div>
            <div class="badge badge--ghost" id="bracketStatus">Loading‚Ä¶</div>
          </div>
          <div class="bracket" id="bracketDiagram"></div>
          <div class="state state--loading" id="bracketLoading">Building bracket‚Ä¶</div>
          <div class="state state--error" id="bracketError" hidden>Unable to build bracket.</div>
        </div>
      </section>
    </main>

    <div class="overlay" id="detailOverlay" hidden>
      <div class="overlay__backdrop"></div>
      <div class="overlay__content" role="dialog" aria-modal="true" aria-labelledby="detailTitle">
        <button class="overlay__close" id="detailClose" aria-label="Close details">√ó</button>
        <div class="detail">
          <div class="detail__header">
            <div>
              <div class="detail__title" id="detailTitle">Team details</div>
              <div class="detail__subtitle" id="detailSubtitle">Tap a team in standings to explore</div>
            </div>
            <div class="detail__badge" id="detailRecord">Record ‚Äî</div>
          </div>
          <div class="detail__body">
            <div class="detail__team" id="teamSummary"></div>
            <div class="detail__players" id="teamPlayers"></div>
            <div class="detail__player-detail" id="playerDetail"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="overlay" id="playerOverlay" hidden>
      <div class="overlay__backdrop"></div>
      <div class="overlay__content" role="dialog" aria-modal="true" aria-labelledby="playerOverlayTitle">
        <button class="overlay__close" id="playerOverlayClose" aria-label="Close player details">√ó</button>
        <div id="playerOverlayContent"></div>
      </div>
    </div>
  </div>
  <script src="app.js"></script>
</body>
</html>
